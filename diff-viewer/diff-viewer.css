/* diff-viewer/diff-viewer.css */

.diff-viewer-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.diff-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}
.diff-header h2 {
    margin: 0;
    font-size: 1.2em;
    font-weight: 600;
}
.diff-header .header-buttons {
    display: flex;
    gap: 8px;
}
.diff-subheader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
}
#diff-key-label {
    font-weight: bold;
    font-style: italic;
    color: var(--text-color);
    opacity: 0.9;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.revision-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}
.revision-label { opacity: 0.8; }

.diff-card { width: clamp(800px, 95vw, 1800px); height: 90vh; padding: 15px; display: flex; flex-direction: column; background-color: var(--card-bg); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
.options-bar { display: flex; align-items: center; padding-bottom: 10px; margin-bottom: 10px; gap: 15px; flex-shrink: 0; }
.options-group, .search-group { display: flex; align-items: center; gap: 10px; }
.search-group { margin-left: auto; }
.options-bar label { display: flex; align-items: center; gap: 4px; user-select: none; }
#search-input { padding: 6px 12px; border-radius: 8px; border: 1px solid var(--button-bg); background-color: var(--select-bg); color: var(--text-color); }

.diff-panes-container { flex-grow: 1; display: flex; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; min-height: 200px; }
.diff-pane {
    flex: 1;
    overflow: auto;
    background-color: var(--card-bg);
    position: relative;
    transition: background-color 0.2s, border-color 0.2s;
}
.diff-pane:first-child { border-right: 1px solid var(--border-color); }
.diff-pane.drag-over { background-color: rgba(13, 110, 253, 0.1); border: 2px dashed var(--selected-bg) !important; }

.scroll-sizer { position: absolute; top: 0; left: 0; width: 1px; height: 0; visibility: hidden; }
.table-container { position: absolute; top: 0; left: 0; width: 100%; }

.code-table { width: 100%; border-collapse: collapse; table-layout: fixed; font-family: var(--editor-font-family); font-size: var(--editor-font-size); }
.code-table tr.line-add td.code-line { background-color: var(--diff-add-bg); }
.code-table tr.line-del td.code-line { background-color: var(--diff-del-bg); }
.code-table tr.line-changed td.code-line { background-color: var(--diff-changed-bg); }

td.line-number { width: 50px; padding: 0 10px 0 5px; text-align: right; color: var(--line-no-color); background-color: var(--card-bg); user-select: none; vertical-align: top; border-right: 1px solid var(--border-color); }
td.line-number.line-no-changed { color: var(--line-no-changed-color); font-weight: bold; }
td.code-line { padding-left: 10px; white-space: pre; }
.diff-card.wrap-text td.code-line { white-space: pre-wrap; word-break: break-all; }
.code-line code { display: inline-block; width: 100%; }

.char-add { background-color: var(--char-add-bg); border-radius: 2px; }
.char-del { background-color: var(--char-del-bg); text-decoration: line-through; border-radius: 2px; }
.search-highlight { background-color: var(--search-highlight-bg); color: var(--search-highlight-text); }

.status-bar { margin-top: 10px; font-size: 0.9em; opacity: 0.8; padding: 5px; text-align: center; border-top: 1px solid var(--border-color); flex-shrink: 0; }
.storage-button { font-size: 0.9em; padding: 6px 12px; border-radius: 8px; border: 1px solid var(--button-bg); background-color: var(--select-bg); color: var(--text-color); cursor: pointer; white-space: nowrap; }

.storage-tooltip { position: absolute; background-color: #38a169; color: #fff; padding: 6px 10px; border-radius: 8px; font-size: 0.85em; z-index: 1001; opacity: 0; visibility: hidden; transition: opacity 0.2s; pointer-events: none; }
.storage-tooltip.warning { background-color: #dc3545; }
.storage-tooltip.show { opacity: 1; visibility: visible; }